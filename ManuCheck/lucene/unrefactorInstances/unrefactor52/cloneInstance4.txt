(startLine=329 endLine=362 srcPath=/home/ubuntu/luceneFilter/1013/lucene/solr/src/common/org/apache/solr/common/cloud/ZkStateReader.java)
      public void process(WatchedEvent event) {
          try {

            log.info("Detected a new or removed collection");
            synchronized (getUpdateLock()) {
              makeShardZkNodeWatches(false);
              updateCloudState(false);
            }
            // re-watch
            String path = event.getPath();
            if (path != null) {
              zkClient.getChildren(path, this);
            }
          } catch (KeeperException e) {
            if(e.code() == KeeperException.Code.SESSIONEXPIRED || e.code() == KeeperException.Code.CONNECTIONLOSS) {
              log.warn("ZooKeeper watch triggered, but Solr cannot talk to ZK");
              return;
            }
            log.error("", e);
            throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,
                "", e);
          } catch (InterruptedException e) {
            // Restore the interrupted status
            Thread.currentThread().interrupt();
            log.error("", e);
            throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,
                "", e);
          } catch (IOException e) {
            log.error("", e);
            throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,
                "", e);
          }

      }});


(startLine=175 endLine=207 srcPath=/root/Projects/elasticsearchFilter/1290/elasticsearch/modules/elasticsearch/src/main/java/org/elasticsearch/common/util/concurrent/TransferThreadPoolExecutor.java)
    private void executeNonBlocking(Runnable command) {
        // note, there might be starvation of some commands that were added to the queue,
        // while others are being transferred directly
        queueSize.getAndIncrement();
        boolean succeeded = workQueue.tryTransfer(command);
        if (succeeded) {
            return;
        }
        int currentPoolSize = poolSize.get();
        if (currentPoolSize < maximumPoolSize) {
            // if we manage to add a worker, add it, and tryTransfer again
            if (poolSize.compareAndSet(currentPoolSize, currentPoolSize + 1)) {
                Thread t = addWorker();
                if (t == null) {
                    poolSize.decrementAndGet();
                    workQueue.add(command);
                } else {
                    t.start();
                    succeeded = workQueue.tryTransfer(command);
                    if (!succeeded) {
                        workQueue.add(command);
                    }
                }
            } else {
                succeeded = workQueue.tryTransfer(command);
                if (!succeeded) {
                    workQueue.add(command);
                }
            }
        } else {
            workQueue.add(command);
        }
    }


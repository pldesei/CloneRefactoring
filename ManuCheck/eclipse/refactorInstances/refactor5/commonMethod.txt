(startLine=111 endLine=135 srcPath=/root/Projects/eclipse.jdt.coreFilter/2024/eclipse.jdt.core/org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/DeletePackageFragmentRootOperation.java)
    protected void updateProjectClasspath(IPath rootPath, IJavaProject project)
        throws JavaModelException {
        IClasspathEntry[] classpath = project.getRawClasspath();
        IClasspathEntry[] newClasspath = null;
        int cpLength = classpath.length;
        int newCPIndex = -1;
        for (int j = 0; j < cpLength; j++) {
            IClasspathEntry entry = classpath[j];
            if (rootPath.equals(entry.getPath())) {
                if (newClasspath == null) {
                    newClasspath = new IClasspathEntry[cpLength-1];
                    System.arraycopy(classpath, 0, newClasspath, 0, j);
                    newCPIndex = j;
                }
            } else if (newClasspath != null) {
                newClasspath[newCPIndex++] = entry;
            }
        }
        if (newClasspath != null) {
            if (newCPIndex < newClasspath.length) {
                System.arraycopy(newClasspath, 0, newClasspath = new IClasspathEntry[newCPIndex], 0, newCPIndex);
            }
            project.setRawClasspath(newClasspath, fMonitor);
        }
    }    


(startLine=268 endLine=299 srcPath=/root/Projects/eclipse.jdt.coreFilter/538/eclipse.jdt.core/org.eclipse.jdt.core.tests.compiler/src/org/eclipse/jdt/core/tests/compiler/parser/AbstractSelectionTest.java)
protected ASTNode findMethod(TypeDeclaration type, int cursorLocation) {
    if (type.methods != null) {
        for (int i = 0; i < type.methods.length; i++) {
            AbstractMethodDeclaration method = type.methods[i];
            if (method.declarationSourceStart <= cursorLocation && (cursorLocation <= method.declarationSourceEnd || method.declarationSourceEnd == 0)) {
                return method;
            }
        }
    }
    if (type.memberTypes != null) {
        for (int i = 0; i < type.memberTypes.length; i++) {
            TypeDeclaration memberType = type.memberTypes[i];
            ASTNode method = findMethod(memberType, cursorLocation);
            if (method != null) {
                return method;
            }
        }
    }
    if (type.fields != null) {
        for (int i = 0; i < type.fields.length; i++) {
            FieldDeclaration field = type.fields[i];
            if (field instanceof Initializer) {
                Initializer initializer = (Initializer)field;
                Block block = initializer.block;
                if (block != null && block.sourceStart <= cursorLocation && (cursorLocation <= block.sourceEnd || block.sourceEnd == 0)) {
                    return type;
                }
            }
        }
    }
    return null;
}


(startLine=1850 endLine=1877 srcPath=/root/Projects/eclipse.jdt.coreFilter/1789/eclipse.jdt.core/org.eclipse.jdt.core/formatter/org/eclipse/jdt/internal/formatter/CodeFormatterVisitor.java)
    public boolean visit(
        ArrayTypeReference arrayTypeReference,
        BlockScope scope) {

        final int numberOfParens = (arrayTypeReference.bits & AstNode.ParenthesizedMASK) >> AstNode.ParenthesizedSHIFT;
        if (numberOfParens > 0) {
            manageOpeningParenthesizedExpression(arrayTypeReference, numberOfParens);
        }
        this.scribe.printNextToken(SINGLETYPEREFERENCE_EXPECTEDTOKENS, false, true);
        
        int dimensions = getExtraDimension();
        if (dimensions != 0) {
            if (this.preferences.insert_space_before_bracket_in_array_type_reference) {
                this.scribe.space();
            }
            for (int i = 0; i < dimensions; i++) {
                this.scribe.printNextToken(TerminalTokens.TokenNameLBRACKET);
                if (this.preferences.insert_space_between_brackets_in_array_type_reference) {
                    this.scribe.space();
                }
                this.scribe.printNextToken(TerminalTokens.TokenNameRBRACKET);
            }
        }
        if (numberOfParens > 0) {
            manageClosingParenthesizedExpression(arrayTypeReference, numberOfParens);
        }
        return false;
    }


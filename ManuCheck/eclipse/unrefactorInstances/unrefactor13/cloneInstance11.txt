(startLine=622 endLine=656 srcPath=/root/Projects/eclipse.jdt.coreFilter/1710/eclipse.jdt.core/org.eclipse.jdt.core.tests.compiler/src/org/eclipse/jdt/core/tests/eval/DebugEvaluationTest.java)
public void test011() {
    String userCode =
        "String s = \"s\";\n" +
        "java.util.Vector v = new java.util.Vector();\n" +
        "v.addElement(s);\n";
    JDIStackFrame stackFrame = new JDIStackFrame(
        this.jdiVM, 
        this,
        userCode);
    
    DebugRequestor requestor = new DebugRequestor();
    char[] snippet = "return v;".toCharArray();
    try {
        context.evaluate(
            snippet,
            stackFrame.localVariableTypeNames(),
            stackFrame.localVariableNames(),
            stackFrame.localVariableModifiers(),
            stackFrame.declaringTypeName(),
            stackFrame.isStatic(),
            stackFrame.isConstructorCall(),
            getEnv(), 
            getCompilerOptions(), 
            requestor, 
            getProblemFactory());
    } catch (InstallException e) {
        assertTrue("No targetException " + e.getMessage(), false);
    }
    assertTrue("Should get one result but got " + requestor.resultIndex+1, requestor.resultIndex == 0);
    EvaluationResult result = requestor.results[0];
    assertTrue("Code snippet should not have problems", !result.hasProblems());
    assertTrue("Result should have a value", result.hasValue());
    assertEquals("Value", "[s]".toCharArray(), result.getValueDisplayString());
    assertEquals("Type", "java.util.Vector".toCharArray(), result.getValueTypeName());
}


(startLine=439 endLine=455 srcPath=/home/ubuntu/guavaFilter/204/guava/guava-tests/test/com/google/common/graph/GraphsTest.java)
  public void copyOf_filtered_directed() {
    Graph<Integer, String> directedGraph = buildDirectedTestGraph();
    directedGraph.addNode(N3);
    Predicate<Integer> nodePredicate = connectedNodePredicate(directedGraph);
    Predicate<String> edgePredicate = Predicates.not(selfLoopPredicate(directedGraph));

    Graph<Integer, String> filteredCopy =
        copyOf(directedGraph, nodePredicate, edgePredicate);

    Graph<Integer, String> expectedGraph =
        GraphBuilder.directed().allowsParallelEdges(true).build();
    expectedGraph.addEdge(E12, N1, N2);
    expectedGraph.addEdge(E12_A, N1, N2);
    expectedGraph.addEdge(E21, N2, N1);

    assertThat(filteredCopy).isEqualTo(expectedGraph);
  }


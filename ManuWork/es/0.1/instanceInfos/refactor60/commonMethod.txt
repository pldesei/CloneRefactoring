(startLine=3410 endLine=3416 srcPath=/root/Projects/elasticsearchFilter/1189/elasticsearch/src/main/java/jsr166e/ConcurrentHashMapV8.java)
    final int batchFor(long b) {
        long n;
        if (b == Long.MAX_VALUE || (n = sumCount()) <= 1L || n < b)
            return 0;
        int sp = ForkJoinPool.getCommonPoolParallelism() << 2; // slack of 4
        return (b <= 0L || (n /= b) >= sp) ? sp : (int)n;
    }


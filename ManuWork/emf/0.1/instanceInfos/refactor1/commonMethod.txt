(startLine=2395 endLine=2410 srcPath=/root/Projects/org.eclipse.emfFilter/938/org.eclipse.emf/plugins/org.eclipse.emf.ecore.xmi/src/org/eclipse/emf/ecore/xmi/impl/XMLSaveImpl.java)
  private String getDatatypeValue (Object value, EStructuralFeature f)
  {
    if (value == null) 
    {
      return null;
    }
    EDataType d = (EDataType)f.getEType();
    EPackage ePackage = d.getEPackage();
    EFactory fac = ePackage.getEFactoryInstance();
    String svalue = helper.convertToString(fac, d, value);
    if (escape != null)
    {
      svalue = escape.convertText(svalue);
    }
    return svalue;
  }


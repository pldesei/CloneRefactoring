(startLine=126 endLine=143 srcPath=/root/NewExperiment/elasticsearchFilter/00786/src/main/java/org/elasticsearch/index/fielddata/plain/ShortArrayIndexFieldData.java)
    static ShortArrayAtomicFieldData build(AtomicReader reader, OrdinalsBuilder builder, Ordinals build, BuilderShorts values) {
        if (!build.isMultiValued()) {
            Docs ordinals = build.ordinals();
            short[] sValues = new short[reader.maxDoc()];
            int maxDoc = reader.maxDoc();
            for (int i = 0; i < maxDoc; i++) {
                sValues[i] = values.get(ordinals.getOrd(i));
            }
            final FixedBitSet set = builder.buildDocsWithValuesSet();
            if (set == null) {
                return new ShortArrayAtomicFieldData.Single(sValues, reader.maxDoc());
            } else {
                return new ShortArrayAtomicFieldData.SingleFixedSet(sValues, reader.maxDoc(), set);
            }
        } else {
            return new ShortArrayAtomicFieldData.WithOrdinals(values.toArray(), reader.maxDoc(), build);
        }
    }


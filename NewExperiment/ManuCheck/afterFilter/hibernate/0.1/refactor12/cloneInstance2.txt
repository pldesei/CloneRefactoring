(startLine=121 endLine=156 srcPath=/root/NewExperiment/hibernateFilter/00315/entitymanager/src/test/java/org/hibernate/ejb/test/ops/PersistTest.java)
	public void testCreateExceptionWithGeneratedId() {
		Session s = openSession();
		Transaction tx = s.beginTransaction();
		NumberedNode dupe = new NumberedNode( "dupe" );
		s.persist( dupe );
		s.persist( dupe );
		tx.commit();
		s.close();

		s = openSession();
		tx = s.beginTransaction();
		try {
			s.persist( dupe );
			fail();
		}
		catch (PersistentObjectException poe) {
			//verify that an exception is thrown!
		}
		tx.rollback();
		s.close();

		NumberedNode nondupe = new NumberedNode( "nondupe" );
		nondupe.addChild( dupe );

		s = openSession();
		tx = s.beginTransaction();
		try {
			s.persist( nondupe );
			fail();
		}
		catch (PersistentObjectException poe) {
			//verify that an exception is thrown!
		}
		tx.rollback();
		s.close();
	}


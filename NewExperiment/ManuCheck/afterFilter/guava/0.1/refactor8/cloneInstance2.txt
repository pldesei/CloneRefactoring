(startLine=263 endLine=278 srcPath=/home/sonia/NewExperiment/guavaFilter/00289/guava/src/com/google/common/util/concurrent/AbstractService.java)
  protected final void notifyStopped() {
    lock.lock();
    try {
      if (state != State.STOPPING && state != State.RUNNING) {
        IllegalStateException failure = new IllegalStateException(
            "Cannot notifyStopped() when the service is " + state);
        notifyFailed(failure);
        throw failure;
      }
      State previous = state;
      state = State.TERMINATED;
      terminated(previous);
    } finally {
      lock.unlock();
    }
  }


(startLine=103 endLine=123 srcPath=/home/sonia/NewExperiment/antFilter/01030/src/main/org/apache/tools/ant/taskdefs/optional/Script.java)
        try {
            addBeans(getProject().getProperties());
            addBeans(getProject().getUserProperties());
            addBeans(getProject().getTargets());
            addBeans(getProject().getReferences());

            beans.put("project", getProject());

            beans.put("self", this);

            BSFManager manager = new BSFManager ();

            for (Enumeration e = beans.keys(); e.hasMoreElements();) {
                String key = (String) e.nextElement();
                Object value = beans.get(key);
                manager.declareBean(key, value, value.getClass());
            }

            // execute the script
            manager.exec(language, "<ANT>", 0, 0, script);
        } catch (BSFException be) {


(startLine=1064 endLine=1083 srcPath=/home/sonia/NewExperiment/jrubyFilter/00598/src/org/jruby/RubyHash.java)
    public IRubyObject select(Block block) {
        RubyArray result = getRuntime().newArray();

        Ruby runtime = getRuntime();
        ThreadContext context = runtime.getCurrentContext();

        try {
            preIter();
            RubyHashEntry[]ltable = table;
            for (int i = 0; i < ltable.length; i++) {
                for (RubyHashEntry entry = ltable[i]; (entry = checkIter(ltable, entry)) != null; entry = entry.next) {
                    IRubyObject key = entry.key;
                    if (block.yield(context, runtime.newArray(key, entry.value), null, null, true).isTrue()) {
                        result.append(runtime.newArray(key, entry.value));
                    }
                }
            }
        } finally {postIter();}
        return result;
    }


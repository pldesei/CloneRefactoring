(startLine=638 endLine=704 srcPath=/home/sonia/NewExperiment/luceneFilter/01995/solr/core/src/test/org/apache/solr/analytics/facet/FieldFacetTest.java)
  public void perc20Test() throws Exception { 
    //Int Date
    String intDateFacet = getFacetXML(response, "percentile_20n","fieldFacets", "date_dtd"); 
    Collection<Integer> intDate = (ArrayList<Integer>)xmlToList(intDateFacet, "int", "int");
    ArrayList<Integer> intDateTest = (ArrayList<Integer>)calculateStat(intDateTestStart, "perc_20");
    assertEquals(intDate,intDateTest);
    //Int String
    String intStringFacet = getFacetXML(response, "percentile_20n","fieldFacets", "string_sd");    
    Collection<Integer> intString = (ArrayList<Integer>)xmlToList(intStringFacet, "int", "int");
    ArrayList<Integer> intStringTest = (ArrayList<Integer>)calculateStat(intStringTestStart, "perc_20");
    assertEquals(intString,intStringTest);

    //Long Date
    String longDateFacet = getFacetXML(response, "percentile_20n","fieldFacets", "date_dtd");    
    Collection<Long> longDate = (ArrayList<Long>)xmlToList(longDateFacet, "long", "long");
    ArrayList<Long> longDateTest = (ArrayList<Long>)calculateStat(longDateTestStart, "perc_20");
    assertEquals(longDate,longDateTest);
    //Long String
    String longStringFacet = getFacetXML(response, "percentile_20n","fieldFacets", "string_sd");    
    Collection<Long> longString = (ArrayList<Long>)xmlToList(longStringFacet, "long", "long");
    ArrayList<Long> longStringTest = (ArrayList<Long>)calculateStat(longStringTestStart, "perc_20");
    assertEquals(longString,longStringTest);

    //Float Date
    String floatDateFacet = getFacetXML(response, "percentile_20n","fieldFacets", "date_dtd");    
    Collection<Float> floatDate = (ArrayList<Float>)xmlToList(floatDateFacet, "float", "float");
    ArrayList<Float> floatDateTest = (ArrayList<Float>)calculateStat(floatDateTestStart, "perc_20");
    assertEquals(floatDate,floatDateTest);
    //Float String
    String floatStringFacet = getFacetXML(response, "percentile_20n","fieldFacets", "string_sd");       
    Collection<Float> floatString = (ArrayList<Float>)xmlToList(floatStringFacet, "float", "float");
    ArrayList<Float> floatStringTest = (ArrayList<Float>)calculateStat(floatStringTestStart, "perc_20");
    assertEquals(floatString,floatStringTest);

    //Double Date
    String doubleDateFacet = getFacetXML(response, "percentile_20n","fieldFacets", "date_dtd");    
    Collection<Double> doubleDate = (ArrayList<Double>)xmlToList(doubleDateFacet, "double", "double");
    ArrayList<Double> doubleDateTest = (ArrayList<Double>)calculateStat(doubleDateTestStart, "perc_20");
    assertEquals(doubleDate,doubleDateTest);
    //Double String
    String doubleStringFacet = getFacetXML(response, "percentile_20n","fieldFacets", "string_sd");      
    Collection<Double> doubleString = (ArrayList<Double>)xmlToList(doubleStringFacet, "double", "double");
    ArrayList<Double> doubleStringTest = (ArrayList<Double>)calculateStat(doubleStringTestStart, "perc_20");
    assertEquals(doubleString,doubleStringTest);

    //Date Int
    String dateIntFacet = getFacetXML(response, "percentile_20","fieldFacets", "int_id"); 
    Collection<String> dateInt = (ArrayList<String>)xmlToList(dateIntFacet, "date", "date");
    ArrayList<String> dateIntTest = (ArrayList<String>)calculateStat(dateIntTestStart, "perc_20");
    assertEquals(dateInt,dateIntTest);
    //Date Long
    String dateStringFacet = getFacetXML(response, "percentile_20","fieldFacets", "long_ld");       
    Collection<String> dateString = (ArrayList<String>)xmlToList(dateStringFacet, "date", "date");
    ArrayList<String> dateLongTest = (ArrayList<String>)calculateStat(dateLongTestStart, "perc_20");
    assertEquals(dateString,dateLongTest);

    //String Int
    String stringIntFacet = getFacetXML(response, "percentile_20","fieldFacets", "int_id");   
    Collection<String> stringInt = (ArrayList<String>)xmlToList(stringIntFacet, "str", "str");
    ArrayList<String> stringIntTest = (ArrayList<String>)calculateStat(stringIntTestStart, "perc_20");
    assertEquals(stringInt,stringIntTest);
    //String Long
    String stringLongFacet = getFacetXML(response, "percentile_20","fieldFacets", "long_ld");     
    Collection<String> stringLong = (ArrayList<String>)xmlToList(stringLongFacet, "str", "str");
    ArrayList<String> stringLongTest = (ArrayList<String>)calculateStat(stringLongTestStart, "perc_20");
    assertEquals(stringLong,stringLongTest);
  }


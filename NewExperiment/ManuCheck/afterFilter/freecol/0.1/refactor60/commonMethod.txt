(startLine=839 endLine=869 srcPath=/root/NewExperiment/freecolFilter/00223/src/net/sf/freecol/common/model/Building.java)
     /**
      * Calculates and returns the output of this building from the input.
      *
      * @return The production of this building from the input.
      * @see getProduction
      * @see getProductionNextTurn
      */
     public int calculateOutput(int goodsInput) {
         int goodsOutput = 0;
         if (level < FACTORY) {
             goodsOutput = goodsInput;
         } else {
             if (getGameOptions().getBoolean(GameOptions.EXPERTS_HAVE_CONNECTIONS)) {
                 int minimumProduction = 0;
                 Iterator i = getUnitIterator();
                 while (i.hasNext()) {
                     Unit unit = (Unit)i.next();
                     if (unit.getType() == getExpertUnitType()) {
                         minimumProduction += 4;
                     }
                 }
                 goodsOutput = (goodsInput * 3) / 2;
                 if (goodsOutput < minimumProduction) {
                     goodsOutput = minimumProduction;
                 }
             } else {
                 goodsOutput = (goodsInput * 3) / 2;
             }
         }
         return goodsOutput;
     }


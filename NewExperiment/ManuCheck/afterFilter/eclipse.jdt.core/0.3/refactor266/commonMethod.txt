(startLine=985 endLine=1003 srcPath=/home/sonia/NewExperiment/eclipse.jdt.coreFilter/00455/org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/JavaModelManager.java)
	public ICompilationUnit[] getWorkingCopies(WorkingCopyOwner owner, boolean addPrimary) {
		synchronized(perWorkingCopyInfos) {
			ICompilationUnit[] primaryWCs = addPrimary && owner != DefaultWorkingCopyOwner.PRIMARY 
				? getWorkingCopies(DefaultWorkingCopyOwner.PRIMARY, false) 
				: NoWorkingCopy;
			Map pathToPerWorkingCopyInfos = (Map)perWorkingCopyInfos.get(owner);
			if (pathToPerWorkingCopyInfos == null) return primaryWCs;
			int primaryLength = primaryWCs.length;
			int size = pathToPerWorkingCopyInfos.size(); // note size is > 0 otherwise pathToPerWorkingCopyInfos would be null
			ICompilationUnit[] result = new ICompilationUnit[primaryLength + size];
			System.arraycopy(primaryWCs, 0, result, 0, primaryLength);
			Iterator iterator = pathToPerWorkingCopyInfos.values().iterator();
			int index = primaryLength;
			while(iterator.hasNext()) {
				result[index++] = ((JavaModelManager.PerWorkingCopyInfo)iterator.next()).getWorkingCopy();
			}
			return result;
		}		
	}


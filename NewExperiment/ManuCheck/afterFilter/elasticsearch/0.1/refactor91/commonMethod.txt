(startLine=159 endLine=168 srcPath=/root/NewExperiment/elasticsearchFilter/00731/src/test/java/org/elasticsearch/test/integration/AbstractNodesTests.java)
    public ImmutableSet<ClusterBlock> waitForNoBlocks(TimeValue timeout, String node) throws InterruptedException {
        long start = System.currentTimeMillis();
        ImmutableSet<ClusterBlock> blocks;
        do {
            blocks = client(node).admin().cluster().prepareState().setLocal(true).execute().actionGet()
                    .state().blocks().global(ClusterBlockLevel.METADATA);
        }
        while (!blocks.isEmpty() && (System.currentTimeMillis() - start) < timeout.millis());
        return blocks;
    }

